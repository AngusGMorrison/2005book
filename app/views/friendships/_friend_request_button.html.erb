<%# If an instance of Friendship has already been initiated by the current user...%>
<% if @friendship = Friendship.find_by(user_id: current_user.id, friend_id: user.id) %>
    
    <% if @friendship.status == "Accepted" %>
        <%= button_to "View Profile" %>
    <% elsif @friendship.status == "Pending" %>
        <button type="button">Friend Request Pending</button>
    <% else %>
        <% @friendship = Friendship.new %>
        <%= render partial: "/friendships/form", locals: { user: current_user, friend: user, friendship: @friendship } %>
    <% end %>

<%# If an instance of Friendship has already been initiated by ANOTHER user...%>
<% elsif @friendship = Friendship.find_by(user_id: user.id, friend_id: current_user.id) %>
    
    <% if @friendship.status == "Accepted" %>
        <%= button_to "View Profile" %>
    <% elsif @friendship.status == "Pending" %>
        <%= render partial: "/friendships/form", locals: { user: user, friend: current_user, friendship: @friendship } %>
        <button type="button">Delete Request</button>
    <% else %>
        <% @friendship = Friendship.new %>
        <%= render partial: "/friendships/form", locals: { user: current_user, friend: user, friendship: @friendship } %>
    <% end %>

<% else %>

    <% @friendship = Friendship.new %>
    <%= render partial: "/friendships/form", locals: { user: current_user, friend: user, friendship: @friendship } %>

<% end %>